"use strict";(self["webpackChunktodo_buudienxatulap"]=self["webpackChunktodo_buudienxatulap"]||[]).push([[25],{4026:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(9835),l=n(6970);const o={class:"text-bold text-subtitle1"};function i(e,t,n,i,s,c){const d=(0,a.up)("q-banner");return(0,a.wg)(),(0,a.j4)(d,{dense:"","inline-actions":"",class:(0,l.C_)([n.bgcolor,"list-header text-white text-center"])},{default:(0,a.w5)((()=>[(0,a._)("span",o,[(0,a.WI)(e.$slots,"default")])])),_:3},8,["class"])}const s={props:["bgcolor"]};var c=n(1639),d=n(7128),u=n(9984),m=n.n(u);const r=(0,c.Z)(s,[["render",i]]),p=r;m()(s,"components",{QBanner:d.Z})},25:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var a=n(9835),l=n(6970),o=n(1957);const i={class:"q-pa-md"},s={class:"q-gutter-y-md column"},c=(0,a._)("div",{class:"text-subtitle1"},"Bảng kê các loại tiền",-1),d={class:"text-caption text-grey"},u={class:"row"},m={class:"col"},r={class:"col"},p={class:"col"},h={class:"row"},g={class:"col"},w={class:"col"},_={class:"col"},v={class:"row"},b={class:"col"},T={class:"col"},V={class:"col"},W=(0,a._)("br",null,null,-1);function f(e,t,n,f,k,y){const C=(0,a.up)("q-btn"),Z=(0,a.up)("ListHeader"),q=(0,a.up)("q-icon"),x=(0,a.up)("q-input"),U=(0,a.up)("q-item-label"),$=(0,a.up)("q-item-section"),D=(0,a.up)("q-item"),Q=(0,a.up)("q-separator"),S=(0,a.up)("q-list"),B=(0,a.up)("q-card-section"),L=(0,a.up)("q-card-actions"),z=(0,a.up)("q-card"),I=(0,a.up)("q-dialog"),K=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(Z,{bgcolor:"bg-orange-4"},{default:(0,a.w5)((()=>[(0,a.Uk)("Danh sách Khách hàng EVN / Tổng: "+(0,l.zw)(e.tongCong.toLocaleString())+" ",1),(0,a.Wm)(C,{rounded:"",color:"primary",onClick:t[0]||(t[0]=t=>e.copySoDienThoaiToClipboard()),icon:"content_copy"}),(0,a.Wm)(C,{rounded:"",color:"primary",onClick:t[1]||(t[1]=t=>e.showDialog=!0),icon:"print"})])),_:1}),(0,a._)("div",s,[(0,a.Wm)(x,{outlined:"",modelValue:e.searchText,"onUpdate:modelValue":t[3]||(t[3]=t=>e.searchText=t),placeholder:"Từ khóa",hint:"Tìm kiếm theo thông tin thẻ BHYT",onKeyup:t[4]||(t[4]=(0,o.D2)((t=>e.timKiem(e.searchText)),["enter"])),dense:""},{append:(0,a.w5)((()=>[""!==e.searchText?((0,a.wg)(),(0,a.j4)(q,{key:0,name:"close",onClick:t[2]||(t[2]=t=>e.searchText=""),class:"cursor-pointer"})):(0,a.kq)("",!0),(0,a.Wm)(q,{name:"search"})])),_:1},8,["modelValue"])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.evns,(t=>((0,a.wg)(),(0,a.j4)(S,{key:t.id},{default:(0,a.w5)((()=>[(0,a.Wm)(D,null,{default:(0,a.w5)((()=>[(0,a.Wm)($,null,{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(t.ten)+" ",1),(0,a.Wm)(q,{onClick:n=>e.xacNhanLoaiBo(t),name:0==t.soTien?"do_not_disturb_on":"delete_forever",color:0==t.soTien?"red":"gray"},null,8,["onClick","name","color"])])),_:2},1024),(0,a.Wm)(U,{caption:"",lines:"2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(t.diaChi),1)])),_:2},1024),(0,a.Wm)(U,{caption:"",lines:"2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(t.soDienThoai),1)])),_:2},1024),(0,a.Wm)(U,{caption:"",lines:"2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(t.ghiChu),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)($,{side:"",top:""},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(t.ma),1)])),_:2},1024),(0,a.Wm)(q,{name:"content_copy",onClick:n=>e.copyTextToClipboard(t.ma)},null,8,["onClick"]),(0,a.Wm)(U,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)("Số tiền: "+(0,l.zw)(parseInt(t.soTien).toLocaleString()),1)])),_:2},1024),(0,a.Wm)(U,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(new Date(t.updated_at).toLocaleString()),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Q,{spaced:"",inset:""})])),_:2},1024)))),128)),(0,a.Wm)(I,{modelValue:e.showDialog,"onUpdate:modelValue":t[15]||(t[15]=t=>e.showDialog=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{class:"my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(B,{class:"q-pt-none"},{default:(0,a.w5)((()=>[c,(0,a._)("div",d,[(0,a._)("div",u,[(0,a._)("div",m,[(0,a.Wm)(x,{dense:"",modelValue:e.t500,"onUpdate:modelValue":t[5]||(t[5]=t=>e.t500=t),label:"T500"},null,8,["modelValue"])]),(0,a._)("div",r,[(0,a.Wm)(x,{dense:"",modelValue:e.t200,"onUpdate:modelValue":t[6]||(t[6]=t=>e.t200=t),label:"T200"},null,8,["modelValue"])]),(0,a._)("div",p,[(0,a.Wm)(x,{dense:"",modelValue:e.t100,"onUpdate:modelValue":t[7]||(t[7]=t=>e.t100=t),label:"T100"},null,8,["modelValue"])])]),(0,a._)("div",h,[(0,a._)("div",g,[(0,a.Wm)(x,{dense:"",modelValue:e.t50,"onUpdate:modelValue":t[8]||(t[8]=t=>e.t50=t),label:"T50"},null,8,["modelValue"])]),(0,a._)("div",w,[(0,a.Wm)(x,{dense:"",modelValue:e.t20,"onUpdate:modelValue":t[9]||(t[9]=t=>e.t20=t),label:"T20"},null,8,["modelValue"])]),(0,a._)("div",_,[(0,a.Wm)(x,{dense:"",modelValue:e.t10,"onUpdate:modelValue":t[10]||(t[10]=t=>e.t10=t),label:"T10"},null,8,["modelValue"])])]),(0,a._)("div",v,[(0,a._)("div",b,[(0,a.Wm)(x,{dense:"",modelValue:e.t5,"onUpdate:modelValue":t[11]||(t[11]=t=>e.t5=t),label:"T5"},null,8,["modelValue"])]),(0,a._)("div",T,[(0,a.Wm)(x,{dense:"",modelValue:e.t2,"onUpdate:modelValue":t[12]||(t[12]=t=>e.t2=t),label:"T2"},null,8,["modelValue"])]),(0,a._)("div",V,[(0,a.Wm)(x,{dense:"",modelValue:e.t1,"onUpdate:modelValue":t[13]||(t[13]=t=>e.t1=t),label:"T1"},null,8,["modelValue"])])])])])),_:1}),(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" Tổng: "+(0,l.zw)((5e5*e.t500+2e5*e.t200+1e5*e.t100+5e4*e.t50+2e4*e.t20+1e4*e.t10+5e3*e.t5+2e3*e.t2+1e3*e.t1).toLocaleString())+" ",1),W,(0,a.Uk)(" Còn thiếu: "+(0,l.zw)((e.tongCong-(5e5*e.t500+2e5*e.t200+1e5*e.t100+5e4*e.t50+2e4*e.t20+1e4*e.t10+5e3*e.t5+2e3*e.t2+1e3*e.t1)).toLocaleString()),1)])),_:1}),(0,a.Wm)(Q),(0,a.Wm)(L,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(C,{flat:"",color:"primary",round:"",icon:"print",onClick:t[14]||(t[14]=t=>e.print())},null,512),[[K]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}n(702);var k=n(9981),y=n.n(k),C=n(6827),Z=n(4026);const q=(0,a.aZ)({components:{ListHeader:Z.Z},name:"EVNPage",data(){return{searchText:"",evns:[],tongCong:0,showDialog:!1,t500:"",t200:"",t100:"",t50:"",t20:"",t10:"",t5:"",t2:"",t1:""}},methods:{xacNhanLoaiBo(e){this.$q.dialog({title:"Confirm",message:"Bạn có muốn loại bỏ?",ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk((()=>{this.soTienBangKhong(e)}))},async soTienBangKhong(e){const{data:t}=await y().put(`https://cms.buudienhuyenmelinh.vn/api/evns/${e.ma}/so-tien`,{soTien:0});this.updateEVN(t)},updateEVN(e){let t=this.evns.find((t=>t.ma===e.ma));t&&Object.assign(t,e)},async timKiem(e,t=!1){let n="https://cms.buudienhuyenmelinh.vn/api/evns?";e&&(n+=`name=${e}`),t&&(n+=`homNay=${t}`);const{data:a}=await y().get(n);this.evns=a,this.tongCong=await a.map((e=>e.soTien)).reduce(((e,t)=>e+parseInt(t)),0)},copyTextToClipboard(e){navigator.clipboard.writeText(e).then((function(){C.Z.create({type:"positive",message:`Bạn đã sao chép: ${e}`})}),(function(e){C.Z.create({type:"negative",message:"Không thực hiện được!"+e})}))},copySoDienThoaiToClipboard(){navigator.clipboard.writeText([...new Set(this.evns.map((e=>e.soDienThoai)))].join()).then((function(){C.Z.create({type:"positive",message:"Bạn đã sao chép thành công!"})}),(function(e){C.Z.create({type:"negative",message:"Không thực hiện được!"+e})}))},async print(){let e=document.createElement("a");e.target="_blank";let t=`https://cms.buudienhuyenmelinh.vn/nop-bhyt/${(new Date).toISOString().slice(0,10)}/pdf?`;this.tongCong&&(t+=`tienDien=${this.tongCong}`),this.t500&&(t+=`&t500=${this.t500}`),this.t200&&(t+=`&t200=${this.t200}`),this.t100&&(t+=`&t100=${this.t100}`),this.t50&&(t+=`&t50=${this.t50}`),this.t20&&(t+=`&t20=${this.t20}`),this.t10&&(t+=`&t10=${this.t10}`),this.t5&&(t+=`&t5=${this.t5}`),this.t2&&(t+=`&t2=${this.t2}`),this.t1&&(t+=`&t1=${this.t1}`),e.href=t,e.click()}},mounted(){this.$route.query.q?this.tongCong=parseInt(this.$route.query.q):this.timKiem("",!0)}});var x=n(1639),U=n(4455),$=n(361),D=n(2857),Q=n(3246),S=n(490),B=n(1233),L=n(3115),z=n(2218),I=n(8404),K=n(4458),N=n(3190),j=n(1821),E=n(2146),H=n(9984),O=n.n(H);const P=(0,x.Z)(q,[["render",f]]),Y=P;O()(q,"components",{QBtn:U.Z,QInput:$.Z,QIcon:D.Z,QList:Q.Z,QItem:S.Z,QItemSection:B.Z,QItemLabel:L.Z,QSeparator:z.Z,QDialog:I.Z,QCard:K.Z,QCardSection:N.Z,QCardActions:j.Z}),O()(q,"directives",{ClosePopup:E.Z})}}]);